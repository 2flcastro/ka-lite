{% extends base_template %}
{% load staticfiles %}
{% load i18n %}
{% load my_filters %}

{% block coachreports_active %}active{% endblock coachreports_active %}

{% block title %}{% trans "Coach Reports" %}{% endblock title %}

{% block headcss %}{{ block.super }}
    <style>
        .selection {
            float: left;
            padding: 0 10px 10px 0;
        }
        select#report_type, select#topic {
            margin-left: 5px;
        }
        .subtitle {
            float: left;
        }
        #facility, .group_select {
            display: none;
        }
        h4 {
            font-size: 20px;
            margin-left: 18px;
            margin-bottom: 0;
        }
        #link-box {
            float: right;
        }
        #link-box input#url {
            font-size: 14px;
        }
        .group_div {
            margin-left: 20px;
        }
        .teach-nav {
            display: inline-block;
            width: 100%;
            border-bottom: 4px solid #5C8547;
            margin-bottom: 25px;
        }
        .teach-nav ul {
            padding-left: 1%;
            display: inline-block;
        }
        .teach-nav li {
            background-color: #5C8547;
            border-top-left-radius: 5px;
            border-top-right-radius: 17px;
            border-top: 3px solid #5C8547;
            border-right: 3px solid #5C8547;
            border-left: 3px solid #5C8547;
            width: 110px;
            text-align: center;
            bottom: 0;
            font-weight: bold;
            display: inline-block !important;
            margin: 0 2px -4px 0;
        }
        .teach-nav li span {
            line-height: 7.7;
        }
        .teach-nav li a:hover {
            background-color: white !important;
            border-top-left-radius: 5px !important;
            border-top-right-radius: 16px !important;
            color: #5C8547;
            font-weight: bold;
        }
        .teach-nav li a {
            color: white;
            padding: 10px !important;
            text-align: center;
            border-top-left-radius: 5px;
            border-top-right-radius: 17px;
            -webkit-transition: all 100ms ease-out !important;
            -moz-transition: all 100ms ease-out !important;
            -o-transition: all 100ms ease-out !important;
            transition: all 100ms ease-out !important;
        }
        .teach-nav li img {
            height: 40px;
            width: auto;
            display: block;
            margin: auto;
            margin-bottom: 5px;
        }
        .active-nav {
            color: #5C8547 !important;
            background-color: white !important;
            border-top-left-radius: 5px !important;
            border-top-right-radius: 16px !important;
            font-weight: bold;      
            display: inline-block;      
        }
        .active {
            background-color: #E9F1E4; 
            height: 50px;       
            display: inline-block;   
        }
        .active-tab {
            background-color: #E9F1E4; 
            height: 89px;
            display: inline-block;
        }
        .reports {
            background: url("{%  static "images/coachreports/reports-icon.png" %}") no-repeat;
            background-position: center 7px;
            height: 87px;
            display: inline-block;
        }
        .reports:hover {
            background: url("{% static "images/coachreports/reports-active-icon.png" %}") no-repeat;
            background-position: center 7px;
            height: 87px;
        }
        .playlist {
            background: url("{% static "images/coachreports/playlist-icon.png" %}") no-repeat;
            background-position: center 7px;
            height: 87px;
        }
        .playlist:hover {
            background: url("{% static "images/coachreports/playlist-active-icon.png" %}") no-repeat;
            background-position: center 7px;
            height: 87px;
        }
        .exams {
            background: url("{% static "images/coachreports/exam-icon.png" %}") no-repeat;
            background-position: center 7px;
            height: 87px;
        }
        .exams:hover {
            background: url("{% static "images/coachreports/exam-active-icon.png" %}") no-repeat;
            background-position: center 7px;
            height: 87px;
        }
        .learn {
            background: url("{% static "images/coachreports/learn-icon.png" %}") no-repeat;
            background-position: center 7px;
            height: 87px;
        }
        .learn:hover {
            background: url("{% static "images/coachreports/learn-active-icon.png" %}") no-repeat;
            background-position: center 7px;
            height: 87px;
        }
        @media only screen and (max-width: 744px) {+
            h4 { margin-top: 0; }
            .selection { padding-bottom: 0; }
            #link-box { float: left; padding-bottom: 10px; }
        }
        @media only screen and (max-width: 655px) {
            #select-topic, select#topic { margin-top: 10px; }
        }
    </style>
{% endblock headcss %}

{% block headjs %}{{ block.super }}
    <script type="text/javascript">
        var FACILITY_ID = "{{ form.facility }}";
        var GROUP_ID = "{{ form.group }}";
    </script>
    <script type="text/javascript" src="{% static 'js/coachreports/base.js' %}"></script>
{% endblock headjs %}

{# sub-pages must embed the navbar within the content, to have it appear. #}

{% block navbar %}

{% block teach_nav %}
    <div class="teach-nav">
        <ul class="nav">
            <li class="teacher-only"><a href="{% url 'coach_reports' %}" class="active-nav active-tab" title="{% trans 'Track the progress of your students' %}"><img src="{% static "images/coachreports/reports-active-icon.png" %}">{% trans "Reports" %}</a></li>
            <li><a href="{% url 'assign_playlists' %}" class="playlist admin-only teacher-only" title="{% trans 'Assign playlists to student groups' %}"><span>{% trans "Playlists" %}</span></a></li>
            <li><a href="{% url 'test_list' %}" class="exams admin-only teacher-only" title="{% trans 'See list of available tests.' %}"><span>{% trans "Exams" %}</span></a></li>
            <li><a class="learn admin-only teacher-only" href="/" title="{% trans 'KA Lite Home' %}"><span>{% trans "Learn" %}</span></a></li>
        </ul>
    </div>
{% endblock teach_nav %}
{% block subnavbar %}{% endblock subnavbar %}

    <div id="navbar" style="padding-bottom:25px">
        <div id="users_link">
        </div>

        {% block navbar_title %}
        <h4>
            <div style="float:left">
                {% block report_title %}
                    {# Note to translators: following this phrase is the name of a class. #}
                    {% trans "Coach Reports" %}
                {% endblock %}
                {# Note to translators: The context is the title "Coach Reports *for* Facility X." #}
                {% trans "for" %}&nbsp;
            </div>
            {% block navbar_facilities %}
            <div id="select-facilities" class="selection">
                <select id="facility">
                {% if facilities %}
                    {% for facility in facilities %}
                    <option value="{{ facility.id }}" {% if form.facility == facility.id %}selected{% endif %}>{{ facility }}</option>
                    {% endfor %}
                {% else %}
                    <option value="" selected>[{% trans "this device" %}]</option>
                {% endif %}
                </select>
                {% if facilities|length > 1 %}
                <a id="facility_editable" href="javascript:make_editable('facility')"></a>
                {% else %}
                <span id="facility_editable"></span>
                {% endif %}
            </div>
            {% endblock navbar_facilities %}

            {% block navbar_groups %}
            <div id="select-groups" class="selection">
                <div class="subtitle"> {% if facilities and groups %}/&nbsp;{% endif %}</div>
                {% if groups %}
                    {% for groupobject in groups %}
                    <div id="{{ groupobject.facility }}" class="group_div">
                        <select id="{{ groupobject.facility }}_group_select" class="group_select">
                            {% if groupobject.groups %}
                                    <option value="">[{% trans "all groups" %}]</option>
                                    {% for group in groupobject.groups %}
                                    <option value="{{ group.id }}">{{ group }}</option>
                                    {% endfor %}
                                    {% if ungrouped_available %}
                                    <option value="Ungrouped">{% trans "Ungrouped" %}</option>
                                    {% endif %}
                            {% else %}
                                <option value="" selected>[{% trans "no groups" %}]</option>
                            {% endif %}
                        </select>
                        {% if groupobject.groups|length > 1 %}
                        <a id="{{ groupobject.facility }}_group_select_editable" href="javascript:make_editable('{{ groupobject.facility }}_group_select')"></a>
                        {% else %}
                        <span id="{{ groupobject.facility }}_group_select_editable"></span>
                        {% endif %}
                    </div>
                    {% endfor %}
                {% endif %}
            </div>
            {% endblock navbar_groups %}

            <div class="clearfix">
                {% block navbar_makelink %}
                <div id="link-box">
                    <input name="url" id="url" type="text" style="display:none"></input>
                    {# Translators: this is used to share a URL (with other teachers) #}
                    <a href="javascript:display_link()">({% trans "share" %})</a>
                </div>
                {% endblock navbar_makelink %}
            </div>
        </h4>
        {% endblock navbar_title %}

        {% block navbar_topics %}
        {% endblock navbar_topics %}
    </div>
{% endblock navbar %}
