{% load i18n %}
{% load staticfiles %}

{% block headcss %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap-timepicker.min.css' %}" />
{% endblock headcss %}

{% block headjs %}
    <script type="text/javascript" src="{% static 'js/bootstrap-timepicker.min.js' %}"></script>
    <script type="text/javascript">
    $(function() {
        $('#time_select').timepicker({
            disableFocus: true,
            showMeridian: false,
            minuteStep: 1
            });
        $('#date_select').datepicker({
            dateFormat: "dd-mm-yy",
            altField: "#standard-date",
            altFormat: "yy-mm-dd"
        });

        $("#date_select").datepicker('setDate', new Date());

        $('#set_time').click(
            function () {
                var data = {
                    date_time: $('#standard-date').val() + " " + $('#time_select').val()
                };
                doRequest("{% url time_set %}", data)
                    .success(function(data) {
                        show_api_messages(data, "id_set_time");
                    })
                    .fail(function(resp) {
                        communicate_api_failure(resp, "id_set_time");
                    });
            });
    });
    </script>
{% endblock headjs %}

{% block content %}
<table>

            <tr>
                <td class="title" colspan="2">
                    <h2>{% trans "Raspberry Pi Clock Reset" %}</h2>
                </td>
            </tr>
            <tr>
                <td><div class="link bootstrap-timepicker"><input id="time_select" type="text"></div></td>
                <td class="desc">{% blocktrans with time_format="HH:MM" %}Input current time ({{ time_format }} - 24 Hour){% endblocktrans %}</td>
            </tr>
            <tr>
                <td><div class="link date"><input id="date_select" type="text"><input type="text" id="standard-date"></div></td>
                <td class="desc">{% blocktrans with date_format="DD-MM-YYYY" %}Input current date ({{ date_format }}){% endblocktrans %}</td>
            </tr>
            <tr>
                <td class="link" colspan="2">
                    <input id="set_time" type="submit" value='{% trans "Update Server Date & Time" %}'>
                </td>
            </tr>
        </table>
{% endblock content %}