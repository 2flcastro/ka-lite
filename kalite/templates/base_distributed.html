{% extends 'base.html' %}

{% block basejs %}
<script type="text/javascript">
    function toggle_state(state, status){
        $("." + (status ? "not-" : "") + state + "-only").hide(); 
        $("." + (!status ? "not-" : "") + state + "-only").show(); 
    }

    $(function(){
        $("[class$=-only]").hide();
        doRequest("/securesync/api/status").success(function(data){
            toggle_state("logged-in", data.is_logged_in);
            toggle_state("registered", data.registered);
            toggle_state("django-admin", data.is_django_user);
            toggle_state("admin", data.is_admin);
            if (data.is_logged_in){
                $('#logged-in-name').text(data.username + " (Logout)");
            }

        });        
    });
</script>
{% endblock basejs %}

{% block sitewide_navigation %}
<span class="dropdown topic-browser-dropdown">
    <a href="/" class="watch-navlink not-django-admin-only {% block watch_selected %}{% endblock watch_selected %}">Watch</a>
    <a href="/exercisedashboard" class="practice-navlink not-django-admin-only {% block practice_selected %}{% endblock practice_selected %}">Practice</a>
    <a href="/securesync/adduser" class="admin-only">Add Student</a>
    <a href="/securesync/addteacher" class="admin-only">Add Teacher</a>
    <a href="/admin" class="django-admin-only">Admin</a>
    <a href="/securesync/adduser" class="not-logged-in-only">Sign Up</a>
    <a href="/securesync/login" class="not-logged-in-only">Login</a>
</span>
<span class="dropdown topic-browser-dropdown not-registered-only">
    <a href="/securesync/register" class="admin-only">Register device</a>
</span>
<span class="dropdown topic-browser-dropdown logged-in-only">
    <a href="/securesync/logout" id="logged-in-name">&nbsp;Logout</a>
</span>

{% endblock sitewide_navigation %}